<title>حساب المكعب</title>
<div class="calc-container">
    <div class="card">
        <div class="input-group">
            <label>طول الضلع (متر)</label>
            <input type="number" id="side" placeholder="0.00" step="any">
        </div>
        <button class="btn-main" onclick="calculateCube()">احسب الحجم</button>
    </div>

    <div id="resultCard" class="result-card hidden"></div>
    <button class="btn-main" onclick="saveCubeResult()" id="saveBtn" style="display: none;">
        <i class="fas fa-save"></i> حفظ النتيجة
    </button>
</div>

<script>
    function calculateCube() {
        const side = parseFloat(document.getElementById('side').value);
        if (side > 0) {
            const volume = Math.pow(side, 3);
            const surfaceArea = 6 * side * side;
            const resCard = document.getElementById('resultCard');
            
            resCard.innerHTML = `
                <h3>النتيجة:</h3>
                <p>الحجم: <span>${volume.toFixed(2)}</span> م³</p>
                <p>المساحة السطحية: <span>${surfaceArea.toFixed(2)}</span> م²</p>
            `;
            resCard.classList.remove('hidden');
            document.getElementById('saveBtn').style.display = 'block';
            window.lastCalc = { title: "المكعب", result: resCard.innerText };
        }
    }

    function saveCubeResult() {
        if (!window.lastCalc) return;
        const data = {
            type: "أحجام",
            name: window.lastCalc.title,
            result: window.lastCalc.result,
            timestamp: new Date().toISOString()
        };
        if (window.firebaseLogic?.saveResult) {
            window.firebaseLogic.saveResult(data).then(() => alert('تم الحفظ ✅')).catch(() => alert('تم الحفظ محلياً ✅'));
        } else {
            let s = JSON.parse(localStorage.getItem('savedResults') || '[]');
            s.push(data);
            localStorage.setItem('savedResults', JSON.stringify(s));
            alert('تم الحفظ محلياً ✅');
        }
    }
</script>
